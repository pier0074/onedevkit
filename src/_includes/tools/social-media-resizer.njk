{# Social Media Image Resizer Tool UI Partial #}
{%- set toolId = "social-media-resizer" -%}
{%- set currentLang = lang | default("en") -%}
<style>
  .platform-selector {
    margin-bottom: var(--space-4);
  }
  .platform-buttons {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-2);
  }
  .platform-btn {
    font-size: var(--text-sm);
  }
  .preset-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
    gap: var(--space-2);
    margin-bottom: var(--space-4);
  }
  .spec-display {
    display: flex;
    gap: var(--space-6);
    padding: var(--space-3) var(--space-4);
    background: var(--color-bg-alt);
    border-radius: var(--radius-md);
    margin-bottom: var(--space-4);
    font-size: var(--text-sm);
  }
  .spec-item {
    display: flex;
    gap: var(--space-2);
  }
  .spec-label {
    color: var(--color-text-secondary);
  }
  .spec-value {
    font-weight: 600;
    font-family: var(--font-mono);
  }
  .upload-zone {
    border: 2px dashed var(--color-border);
    border-radius: var(--radius-lg);
    padding: var(--space-8);
    text-align: center;
    cursor: pointer;
    transition: all var(--transition-fast);
    background: var(--color-bg-alt);
  }
  .upload-zone:hover, .upload-zone.dragover {
    border-color: var(--color-primary);
    background: var(--color-primary-light);
  }
  .upload-icon {
    width: 48px;
    height: 48px;
    margin: 0 auto var(--space-3);
    color: var(--color-text-secondary);
  }
  .upload-text {
    font-size: var(--text-lg);
    font-weight: 500;
    margin-bottom: var(--space-1);
  }
  .upload-hint {
    font-size: var(--text-sm);
    color: var(--color-text-secondary);
  }
  #editor-section {
    display: none;
    margin-top: var(--space-6);
  }
  #editor-section.show {
    display: block;
  }
  .editor-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--space-6);
  }
  @media (max-width: 768px) {
    .editor-grid {
      grid-template-columns: 1fr;
    }
  }
  .preview-container {
    background: var(--color-bg-alt);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-lg);
    padding: var(--space-4);
    text-align: center;
  }
  .preview-title {
    font-weight: 600;
    margin-bottom: var(--space-3);
    font-size: var(--text-sm);
    color: var(--color-text-secondary);
  }
  #preview-canvas {
    max-width: 100%;
    max-height: 400px;
    border-radius: var(--radius-md);
    box-shadow: var(--shadow-md);
  }
  .preview-stats {
    display: flex;
    justify-content: center;
    gap: var(--space-6);
    margin-top: var(--space-3);
    font-size: var(--text-sm);
  }
  .stat-item {
    display: flex;
    gap: var(--space-2);
  }
  .stat-label {
    color: var(--color-text-secondary);
  }
  .stat-value {
    font-weight: 600;
    font-family: var(--font-mono);
  }
  .controls-container {
    background: var(--color-bg-alt);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-lg);
    padding: var(--space-4);
  }
  .control-group {
    margin-bottom: var(--space-4);
  }
  .control-label {
    display: flex;
    justify-content: space-between;
    font-size: var(--text-sm);
    margin-bottom: var(--space-2);
  }
  .zoom-slider {
    width: 100%;
    height: 8px;
    -webkit-appearance: none;
    background: var(--color-border);
    border-radius: var(--radius-full);
    outline: none;
  }
  .zoom-slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 20px;
    height: 20px;
    background: var(--color-primary);
    border-radius: var(--radius-full);
    cursor: pointer;
  }
  .transform-buttons {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-2);
  }
  .transform-buttons .btn {
    flex: 1;
    min-width: 70px;
  }
  .download-buttons {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
  }
  .shortcuts-hint {
    margin-top: var(--space-3);
    padding-top: var(--space-3);
    border-top: 1px solid var(--color-border);
  }
  .status-message {
    padding: var(--space-2) var(--space-3);
    border-radius: var(--radius-md);
    font-size: var(--text-sm);
    margin-top: var(--space-2);
    display: none;
  }
  .status-message.show {
    display: block;
  }
  .status-message.success {
    background: var(--color-success-bg);
    color: var(--color-success);
  }
  .status-message.error {
    background: var(--color-error-bg);
    color: var(--color-error);
  }
  .status-message.processing {
    background: var(--color-warning-bg);
    color: var(--color-warning);
  }
</style>

<div class="tool-container">
  <!-- Platform Selector -->
  <h3 style="margin-bottom: var(--space-3); font-size: var(--text-base);">{{ toolId | toolTNested(currentLang, "ui.selectPlatform") }}</h3>

  <div class="platform-selector">
    <div class="platform-buttons" role="group" aria-label="Social media platforms">
      <button class="btn-option platform-btn active" data-platform="instagram">Instagram</button>
      <button class="btn-option platform-btn" data-platform="facebook">Facebook</button>
      <button class="btn-option platform-btn" data-platform="twitter">Twitter/X</button>
      <button class="btn-option platform-btn" data-platform="linkedin">LinkedIn</button>
      <button class="btn-option platform-btn" data-platform="youtube">YouTube</button>
      <button class="btn-option platform-btn" data-platform="tiktok">TikTok</button>
      <button class="btn-option platform-btn" data-platform="pinterest">Pinterest</button>
      <button class="btn-option platform-btn" data-platform="snapchat">Snapchat</button>
      <button class="btn-option platform-btn" data-platform="whatsapp">WhatsApp</button>
      <button class="btn-option platform-btn" data-platform="discord">Discord</button>
      <button class="btn-option platform-btn" data-platform="twitch">Twitch</button>
      <button class="btn-option platform-btn" data-platform="threads">Threads</button>
      <button class="btn-option platform-btn" data-platform="custom">Custom</button>
    </div>
  </div>

  <!-- Custom Dimensions (shown when Custom is selected) -->
  <div id="custom-options" style="display: none; margin-bottom: var(--space-4); padding: var(--space-3); background: var(--color-bg-alt); border-radius: var(--radius-md);">
    <div style="display: flex; gap: var(--space-4); flex-wrap: wrap; align-items: center;">
      <div>
        <label for="custom-width" style="font-size: var(--text-sm); margin-right: var(--space-2);">{{ "common.width" | t(currentLang) }}:</label>
        <input type="number" id="custom-width" value="1080" min="10" max="4096" style="width: 80px; padding: var(--space-2); border: 1px solid var(--color-border); border-radius: var(--radius-sm);">
      </div>
      <div>
        <label for="custom-height" style="font-size: var(--text-sm); margin-right: var(--space-2);">{{ "common.height" | t(currentLang) }}:</label>
        <input type="number" id="custom-height" value="1080" min="10" max="4096" style="width: 80px; padding: var(--space-2); border: 1px solid var(--color-border); border-radius: var(--radius-sm);">
      </div>
    </div>
  </div>

  <!-- Size Presets -->
  <h3 style="margin-bottom: var(--space-3); font-size: var(--text-base);">{{ toolId | toolTNested(currentLang, "ui.selectSize") }}</h3>
  <div id="preset-buttons" class="preset-grid" role="group" aria-label="Size presets">
    <!-- Populated by JavaScript -->
  </div>

  <!-- Current Spec Display -->
  <div class="spec-display">
    <div class="spec-item">
      <span class="spec-label">{{ "common.type" | t(currentLang) }}:</span>
      <span class="spec-value" id="spec-name">Square Post</span>
    </div>
    <div class="spec-item">
      <span class="spec-label">{{ "common.size" | t(currentLang) }}:</span>
      <span class="spec-value" id="spec-dimensions">1080×1080px</span>
    </div>
    <div class="spec-item">
      <span class="spec-label">{{ "common.ratio" | t(currentLang) }}:</span>
      <span class="spec-value" id="spec-ratio">1:1</span>
    </div>
  </div>

  <!-- Upload Zone -->
  <div id="upload-zone" class="upload-zone" role="button" tabindex="0" aria-label="Upload image">
    <svg class="upload-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
    </svg>
    <div class="upload-text">{{ "common.dragDrop" | t(currentLang) }}</div>
    <div class="upload-hint">{{ toolId | toolTNested(currentLang, "ui.uploadHint") }}</div>
  </div>
  <input type="file" id="file-input" accept="image/*" style="display: none;">
  <input type="file" id="batch-input" accept="image/*" multiple style="display: none;">

  <div id="status" class="status-message"></div>

  <!-- Editor Section -->
  <div id="editor-section">
    <div class="editor-grid">
      <!-- Preview -->
      <div class="preview-container">
        <div class="preview-title">{{ "common.preview" | t(currentLang) }} <span style="font-weight: normal; font-size: var(--text-xs); color: var(--color-text-muted);">({{ toolId | toolTNested(currentLang, "ui.dragToPan") }})</span></div>
        <canvas id="preview-canvas"></canvas>
        <div class="preview-stats">
          <div class="stat-item">
            <span class="stat-label">{{ "common.size" | t(currentLang) }}:</span>
            <span class="stat-value" id="preview-dimensions">-</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">{{ "common.file" | t(currentLang) }}:</span>
            <span class="stat-value" id="preview-filesize">-</span>
          </div>
        </div>
      </div>

      <!-- Controls -->
      <div class="controls-container">
        <!-- Transform Controls -->
        <div class="control-group">
          <div class="control-label"><span>{{ "common.transform" | t(currentLang) }}</span></div>
          <div class="transform-buttons">
            <button id="rotate-ccw" class="btn btn-secondary btn-sm" title="Rotate Left (Shift+R)">↺ 90°</button>
            <button id="rotate-cw" class="btn btn-secondary btn-sm" title="Rotate Right (R)">↻ 90°</button>
            <button id="flip-h" class="btn btn-secondary btn-sm" title="Flip Horizontal (H)">↔ {{ toolId | toolTNested(currentLang, "ui.flip") }}</button>
            <button id="flip-v" class="btn btn-secondary btn-sm" title="Flip Vertical (V)">↕ {{ toolId | toolTNested(currentLang, "ui.flip") }}</button>
          </div>
        </div>

        <!-- Position Controls -->
        <div class="control-group">
          <div class="control-label"><span>{{ "common.position" | t(currentLang) }}</span></div>
          <div class="transform-buttons">
            <button id="center-btn" class="btn btn-secondary btn-sm" title="Center Image (C)">⊙ {{ "common.center" | t(currentLang) }}</button>
            <button id="reset-transforms" class="btn btn-secondary btn-sm" title="Reset All (Ctrl+0)">↺ {{ "common.resetAll" | t(currentLang) }}</button>
          </div>
        </div>

        <!-- Undo/Redo -->
        <div class="control-group">
          <div class="control-label"><span>{{ "common.history" | t(currentLang) }}</span></div>
          <div class="transform-buttons">
            <button id="undo-btn" class="btn btn-secondary btn-sm" disabled title="Undo (Ctrl+Z)">↶ {{ "common.undo" | t(currentLang) }}</button>
            <button id="redo-btn" class="btn btn-secondary btn-sm" disabled title="Redo (Ctrl+Y)">↷ {{ "common.redo" | t(currentLang) }}</button>
          </div>
        </div>

        <!-- Zoom -->
        <div class="control-group">
          <div class="control-label">
            <span>{{ "common.zoom" | t(currentLang) }}</span>
            <span id="zoom-value">100%</span>
          </div>
          <input type="range" id="zoom-slider" class="zoom-slider" min="10" max="400" value="100">
        </div>

        <!-- Filters -->
        <div class="control-group">
          <div class="control-label">
            <span>{{ "common.brightness" | t(currentLang) }}</span>
            <span id="brightness-value">100%</span>
          </div>
          <input type="range" id="brightness-slider" class="zoom-slider" min="0" max="200" value="100">
        </div>

        <div class="control-group">
          <div class="control-label">
            <span>{{ "common.contrast" | t(currentLang) }}</span>
            <span id="contrast-value">100%</span>
          </div>
          <input type="range" id="contrast-slider" class="zoom-slider" min="0" max="200" value="100">
        </div>

        <div class="control-group">
          <div class="control-label">
            <span>{{ "common.saturation" | t(currentLang) }}</span>
            <span id="saturation-value">100%</span>
          </div>
          <input type="range" id="saturation-slider" class="zoom-slider" min="0" max="200" value="100">
        </div>

        <!-- Border -->
        <div class="control-group">
          <div class="control-label">
            <span>{{ toolId | toolTNested(currentLang, "ui.borderPadding") }}</span>
            <span id="border-value">0px</span>
          </div>
          <input type="range" id="border-slider" class="zoom-slider" min="0" max="100" value="0">
        </div>

        <!-- Background & Options -->
        <div class="control-group">
          <div class="control-label"><span>{{ "common.backgroundColor" | t(currentLang) }}</span></div>
          <input type="color" id="bg-color" value="#ffffff" style="width: 100%; height: 36px; border: 1px solid var(--color-border); border-radius: var(--radius-sm); cursor: pointer;">
        </div>

        <div class="control-group">
          <div class="transform-buttons">
            <button id="fit-mode" class="btn btn-secondary btn-sm" style="flex: 1;">{{ toolId | toolTNested(currentLang, "ui.cropToFill") }}</button>
            <button id="toggle-grid" class="btn btn-secondary btn-sm" style="flex: 1;">{{ toolId | toolTNested(currentLang, "ui.showGrid") }}</button>
            <button id="circle-crop" class="btn btn-secondary btn-sm" style="flex: 1;" title="Circle crop for profile pictures">{{ toolId | toolTNested(currentLang, "ui.circle") }}</button>
          </div>
        </div>

        <!-- Download -->
        <div class="download-buttons">
          <button id="download-btn" class="btn btn-primary" disabled>{{ "common.downloadJpg" | t(currentLang) }}</button>
          <button id="download-png" class="btn btn-secondary">{{ "common.downloadPng" | t(currentLang) }}</button>
          <button id="download-batch" class="btn btn-secondary" disabled>{{ toolId | toolTNested(currentLang, "ui.downloadAllBatch") }}</button>
          <button id="reset-btn" class="btn btn-ghost">{{ "common.reset" | t(currentLang) }}</button>
        </div>

        <!-- Keyboard Shortcuts -->
        <div class="shortcuts-hint">
          <details>
            <summary style="cursor: pointer; font-size: var(--text-xs); color: var(--color-text-muted);">{{ "common.keyboardShortcuts" | t(currentLang) }}</summary>
            <div style="font-size: var(--text-xs); color: var(--color-text-muted); margin-top: var(--space-2); line-height: 1.6;">
              {{ toolId | toolTNested(currentLang, "ui.shortcuts.arrowKeys") }}<br>
              {{ toolId | toolTNested(currentLang, "ui.shortcuts.zoomKeys") }}<br>
              {{ toolId | toolTNested(currentLang, "ui.shortcuts.rotate") }}<br>
              {{ toolId | toolTNested(currentLang, "ui.shortcuts.flipH") }}<br>
              {{ toolId | toolTNested(currentLang, "ui.shortcuts.flipV") }}<br>
              {{ toolId | toolTNested(currentLang, "ui.shortcuts.center") }}<br>
              {{ toolId | toolTNested(currentLang, "ui.shortcuts.grid") }}<br>
              {{ toolId | toolTNested(currentLang, "ui.shortcuts.undo") }}<br>
              {{ toolId | toolTNested(currentLang, "ui.shortcuts.redo") }}<br>
              {{ toolId | toolTNested(currentLang, "ui.shortcuts.resetAll") }}
            </div>
          </details>
        </div>
      </div>
    </div>
  </div>
</div>
