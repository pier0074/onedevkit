{# Passport Photo Maker Tool UI Partial #}
<style>
  .upload-zone {
    border: 2px dashed var(--color-border);
    border-radius: var(--radius-xl);
    padding: var(--space-8);
    text-align: center;
    cursor: pointer;
    transition: all var(--transition-normal);
    background: var(--color-bg-alt);
  }
  .upload-zone:hover, .upload-zone.dragover {
    border-color: var(--color-primary);
    background: var(--color-primary-light);
  }
  .upload-zone input { display: none; }
  .upload-icon {
    width: 48px;
    height: 48px;
    margin: 0 auto var(--space-3);
    color: var(--color-text-secondary);
  }

  .country-select {
    margin: var(--space-4) 0;
  }
  .country-select select {
    width: 100%;
    padding: var(--space-3);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
    font-size: var(--text-base);
    background: var(--color-bg);
    color: var(--color-text);
  }

  .spec-info {
    background: var(--color-bg-alt);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-lg);
    padding: var(--space-4);
    margin: var(--space-4) 0;
  }
  .spec-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: var(--space-3);
  }
  .spec-item {
    font-size: var(--text-sm);
  }
  .spec-label {
    color: var(--color-text-secondary);
  }
  .spec-value {
    font-weight: 600;
    color: var(--color-text);
  }

  .editor-section {
    display: none;
    margin-top: var(--space-6);
  }
  .editor-section.show { display: block; }

  .editor-grid {
    display: grid;
    grid-template-columns: 1fr 300px;
    gap: var(--space-6);
  }
  @media (max-width: 768px) {
    .editor-grid { grid-template-columns: 1fr; }
  }

  .crop-container {
    position: relative;
    background: #f0f0f0;
    border-radius: var(--radius-lg);
    overflow: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 400px;
  }
  .crop-image {
    max-width: 100%;
    max-height: 400px;
    display: block;
  }
  .crop-overlay {
    position: absolute;
    border: 2px dashed var(--color-primary);
    background: rgba(37, 99, 235, 0.1);
    cursor: move;
  }

  .preview-panel {
    background: var(--color-bg-alt);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-lg);
    padding: var(--space-4);
  }
  .preview-title {
    font-weight: 600;
    margin-bottom: var(--space-3);
  }
  .preview-image {
    width: 100%;
    background: white;
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
    margin-bottom: var(--space-3);
  }
  .preview-stats {
    font-size: var(--text-sm);
    color: var(--color-text-secondary);
  }
  .preview-stats div {
    display: flex;
    justify-content: space-between;
    margin-bottom: var(--space-1);
  }
  .preview-stats .value {
    font-weight: 500;
    color: var(--color-text);
  }
  .preview-stats .success { color: var(--color-success); }

  .controls-section {
    margin-top: var(--space-4);
  }
  .control-group {
    margin-bottom: var(--space-4);
  }
  .control-label {
    display: block;
    font-size: var(--text-sm);
    font-weight: 500;
    margin-bottom: var(--space-2);
  }
  .control-slider {
    width: 100%;
  }

  .status-message {
    padding: var(--space-3) var(--space-4);
    border-radius: var(--radius-md);
    margin-top: var(--space-4);
    font-size: var(--text-sm);
    display: none;
  }
  .status-message.show { display: block; }
  .status-message.processing { background: var(--color-primary-light); color: var(--color-primary); }
  .status-message.success { background: #dcfce7; color: #16a34a; }
  .status-message.error { background: #fee2e2; color: #dc2626; }

  /* Table styling */
  .table-responsive {
    overflow-x: auto;
  }
  .data-table {
    width: 100%;
    border-collapse: collapse;
    border-spacing: 0;
    font-size: var(--text-sm);
  }
  .data-table thead,
  .data-table tbody {
    border: none;
  }
  .data-table th,
  .data-table td {
    padding: var(--space-3) var(--space-4);
    text-align: center;
    border-bottom: 1px solid var(--color-border);
  }
  .data-table th {
    background: var(--color-bg-alt);
    font-weight: 600;
    text-align: center;
  }
  .data-table tbody tr:hover {
    background: var(--color-bg-alt);
  }

  /* Pan controls */
  .pan-controls {
    display: flex;
    gap: var(--space-2);
    margin-top: var(--space-3);
  }
  .pan-controls .btn {
    flex: 1;
  }
  .crop-container {
    cursor: grab;
  }
  .crop-container.panning {
    cursor: grabbing;
  }

  /* Crop overlay to show selected area */
  .crop-overlay {
    position: absolute;
    border: 3px solid var(--color-primary);
    background: transparent;
    box-shadow: 0 0 0 9999px rgba(0, 0, 0, 0.5);
    pointer-events: none;
    transition: none;
  }
  .crop-overlay::before {
    content: '';
    position: absolute;
    inset: 0;
    border: 1px dashed rgba(255, 255, 255, 0.5);
  }
  /* Rule of thirds grid */
  .crop-overlay::after {
    content: '';
    position: absolute;
    inset: 0;
    background:
      linear-gradient(to right, rgba(255,255,255,0.3) 1px, transparent 1px),
      linear-gradient(to bottom, rgba(255,255,255,0.3) 1px, transparent 1px);
    background-size: 33.33% 33.33%;
  }
</style>

<div class="tool-container">
  <!-- Country Selection -->
  <div class="country-select">
    <label for="country" class="control-label">Select Country / Document Type</label>
    <select id="country">
      <optgroup label="Popular">
        <option value="usa" selected>USA - Passport (2×2 inches)</option>
        <option value="india">India - Passport/Visa (2×2 inches, 20-300KB)</option>
        <option value="uk">UK - Passport (35×45mm)</option>
        <option value="schengen">Schengen Visa (35×45mm)</option>
        <option value="canada">Canada - Passport (50×70mm)</option>
        <option value="australia">Australia - Passport (35×45mm)</option>
      </optgroup>
      <optgroup label="Asia">
        <option value="china">China - Visa (33×48mm)</option>
        <option value="japan">Japan - Passport (35×45mm)</option>
        <option value="singapore">Singapore - Passport (35×45mm)</option>
      </optgroup>
      <optgroup label="Other">
        <option value="custom">Custom Size</option>
      </optgroup>
    </select>
  </div>

  <!-- Specifications Display -->
  <div class="spec-info" id="spec-info">
    <div class="spec-grid">
      <div class="spec-item">
        <span class="spec-label">{{ "common.size" | t(lang) }}:</span>
        <span class="spec-value" id="spec-size">2×2 inches</span>
      </div>
      <div class="spec-item">
        <span class="spec-label">Pixels:</span>
        <span class="spec-value" id="spec-pixels">600×600px</span>
      </div>
      <div class="spec-item">
        <span class="spec-label">Max File Size:</span>
        <span class="spec-value" id="spec-filesize">240KB</span>
      </div>
      <div class="spec-item">
        <span class="spec-label">Background:</span>
        <span class="spec-value" id="spec-background">White</span>
      </div>
    </div>
  </div>

  <!-- Custom Size Options (hidden by default) -->
  <div id="custom-options" style="display: none; margin-bottom: var(--space-4);">
    <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: var(--space-3);">
      <div>
        <label class="control-label">{{ "common.width" | t(lang) }} (px)</label>
        <input type="number" id="custom-width" value="600" min="100" max="2000" class="tool-input">
      </div>
      <div>
        <label class="control-label">{{ "common.height" | t(lang) }} (px)</label>
        <input type="number" id="custom-height" value="600" min="100" max="2000" class="tool-input">
      </div>
      <div>
        <label class="control-label">Max KB</label>
        <input type="number" id="custom-maxkb" value="200" min="10" max="5000" class="tool-input">
      </div>
    </div>
  </div>

  <!-- Upload Zone -->
  <div class="upload-zone" id="upload-zone">
    <input type="file" id="file-input" accept="image/*">
    <div class="upload-icon">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
      </svg>
    </div>
    <div>Click to upload your photo</div>
    <div style="font-size: var(--text-sm); color: var(--color-text-muted); margin-top: var(--space-2);">
      JPG, PNG (Max 10MB)
    </div>
  </div>

  <!-- Status -->
  <div class="status-message" id="status"></div>

  <!-- Editor Section -->
  <div class="editor-section" id="editor-section">
    <div class="editor-grid">
      <!-- Crop Area -->
      <div>
        <div class="crop-container" id="crop-container">
          <img id="source-image" class="crop-image" alt="Source photo">
          <div id="crop-overlay" class="crop-overlay" style="display: none;"></div>
        </div>
        <div class="controls-section">
          <div class="control-group">
            <label class="control-label">Zoom: <span id="zoom-value">100%</span></label>
            <input type="range" id="zoom-slider" class="control-slider" min="10" max="400" value="100">
          </div>
          <div class="control-group">
            <label class="control-label">Position <span style="font-weight: normal; font-size: var(--text-xs); color: var(--color-text-muted);">(drag preview or use buttons)</span></label>
            <div class="pan-controls">
              <button id="center-btn" class="btn btn-secondary btn-sm">Center</button>
              <button id="reset-position" class="btn btn-secondary btn-sm">{{ "common.reset" | t(lang) }} All</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Preview Panel -->
      <div class="preview-panel">
        <div class="preview-title">{{ "common.preview" | t(lang) }}</div>
        <canvas id="preview-canvas" class="preview-image"></canvas>
        <div class="preview-stats">
          <div><span>Dimensions:</span><span class="value" id="preview-dimensions">-</span></div>
          <div><span>File Size:</span><span class="value" id="preview-filesize">-</span></div>
          <div><span>Status:</span><span class="value" id="preview-status">-</span></div>
        </div>

        <div class="tool-actions" style="margin-top: var(--space-4);">
          <button id="download-btn" class="btn btn-primary" style="width: 100%;" disabled>{{ "common.download" | t(lang) }} Photo</button>
        </div>
        <button id="download-print" class="btn btn-secondary" style="width: 100%; margin-top: var(--space-2);" disabled>{{ "common.download" | t(lang) }} Print Layout (4×6)</button>
        <button id="reset-btn" class="btn btn-ghost" style="width: 100%; margin-top: var(--space-2);">Start Over</button>
      </div>
    </div>
  </div>
</div>
